<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>visualizard</title>
  <!-- <link rel="stylesheet" type="text/css" href="reset.css" /> -->
  <style>

  html, body{ 
    width:100%; 
    margin:0; 
    padding:0;
    background: black;
    overflow: hidden;
  }
  #container {
    width:100%; height:100%; margin: 0px; padding: 0px;
  }

  .square{ 
    padding-bottom: 30%; height: 0;width:33%; 
    float:left; 
    /*display: inline;*/
    display:block;
  }

  body {
    -webkit-filter: saturate(3);
  }

  </style>
</head>
<body id="container2">
    {% if site.gifs %}
    <div id="container">
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
    </div>
    {% else %}
    <p>No gifs detected or loaded.</p>
    {% endif %}

  <script>

    function rando_gif() {
      var gif_length = {{gifs|tojson|safe}}.length;
      var ran_num = Math.floor(Math.random() * gif_length);
      return {{gifs|tojson|safe}}[ran_num];
    }

    document.getElementById("container2").style.backgroundImage = "url(gifs/"+rando_gif()+")";

    var sections = document.querySelectorAll(".square");
    for(var i = 0; i < sections.length; i++) {
      var rando = rando_gif();
      var new_gif = document.createElement("img");
      new_gif.src = "gifs/"+rando;
      sections[i].appendChild(new_gif);
    }

    setInterval(function() {
      //randomly grab one of the sections to update
      var ran_num = Math.floor(Math.random() * sections.length);
      document.querySelectorAll("img")[ran_num].src = "gifs/"+rando_gif();
    }, 1000);

    setInterval(function() {
      document.getElementById("container2").style.backgroundImage = "url(gifs/"+rando_gif()+")";
    }, 2000)

  </script>
</body>
</html>